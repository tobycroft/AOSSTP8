<?php

namespace app\v1\qwen\controller;


use app\v1\image\controller\create;
use app\v1\nlp\model\NlpModel;
use Qwen\Enums\Models;
use Qwen\QwenClient;

class index extends create
{

    protected $nlp_proc = [];

    public function initialize()
    {
        parent::initialize(); // TODO: Change the autogenerated stub
        $project = NlpModel::where("project", $this->token)->findOrEmpty();
        if (empty($project)) {
            \Ret::Fail(404, null, "项目不存在");
        } else {
            $this->nlp_proc = $project->toArray();
        }
        switch ($this->nlp_proc["type"]) {
            case "aliyun":
                $this->aliyun();
                break;
        }
    }

    public function index()
    {
        $apiKey = 'your-api-key';

        $response = QwenClient::build($apiKey)
            ->query('Hello qwen, how are you today?')
            ->withModel('qwen2.5-1.5b-instruct')
            ->run();

        echo 'API Response:' . $response;
    }
}